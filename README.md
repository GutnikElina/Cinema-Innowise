## TICKET BOOKING SYSTEM

## Краткое описание
Система бронирования билетов для кинотеатра, позволяющая пользователям искать фильмы, бронировать 
билеты, просматривать купленные билеты и управлять своим аккаунтом, а администраторам — управлять 
пользователями, сеансами и билетами.

## Технологии:
- Frontend: JSP, HTML, CSS
- Backend: Spring Framework/Data/MVC/Security, Hibernate
- База данных: MySQL
- Сервер: Apache Tomcat 11.0.1
- Инструменты: Maven, Git для контроля версий, JUnit для тестирования, Docker для контейнеризации
  
## Запуск проекта

### Предварительные требования
- Git
- Docker
- Docker Compose

### Шаги для запуска

1. Клонирование репозитория:
```bash
git clone https://github.com/GutnikElina/Cinema-Innowise.git
cd Cinema-Innowise
```

2. Запуск приложения:
```bash
docker-compose up -d
```

3. Проверка статуса:
```bash
docker-compose ps
```

4. Доступ к приложению:
- Веб-интерфейс: http://localhost:8080
- База данных: localhost:3307
  - Username: cinema_user
  - Password: cinema_password
  - Database: cinema_db

5. Вход:
- Пользователь:
  - login: user123
  - password: user123
- Администратор:
  - login: admin
  - password: admin

ПРИМЕЧАНИЕ:
  - При первичном поиске фильмов может долго загружаться, так как изначально данные подгружаются из API. 
После первого запроса данные будут браться из БД.

### Остановка приложения
```bash
docker-compose down
```

Для удаления всех данных (включая базу данных):
```bash
docker-compose down -v
```

## Текущий этап выполнения

- Панель администратора
- Панель пользователя

- Функционал администратора: управление пользователями, управление сеансами, управление билетами; поиск фильмов, подтверждение (отмена) 
билетов администратором, а также одобрение возврата при запросе пользователя.
Примечание: Каждое управление сущностями подразумевает: добавление, обновление, удаление, просмотр всех объектов, хранящихся в бд этой сущности.

- Функционал пользователя: редактирование своего аккаунта, поиск фильмов, покупка билетов пользователем и просмотр своих купленных билетов

- Поиск фильмов по названию на стороне пользователя и администратора. Изначально происходит поиск фильмов в базе данных, если фильмы с таким названием не найдены, 
то далее происходит поиск фильмов в OMDB API и подгружаются данные из API в БД. В дальнейшем при поиске фильмов с таким же названием 
данные будут получаться непосредственно из БД. 

- Возможность изменять языки в системе (англ/рус).

## Подробности этапов

### Общая структура:
- **Сущности:** 
  - `User` (пользователь): ID, логин, хэшированный пароль, роль (администратор/пользователь), дата создания аккаунта.
  - `Session` (киносеанс): ID, фильм, дата, время начала сеанса, время конца сеанса, вместимость зала, цена.
  - `Ticket` (билет): ID, пользователь, сеанс, место, время покупки, статус покупки(в ожидании, подтвержден, не подтвержден, возвращен).
  - `Movie` (фильм): название, год выпуска, постер, сюжет, длительность, жанр, IMDB рейтинг.
- **JSP страницы:** 
  - Для администрирования: главная страница админа, управление пользователями, сеансами, билетами, подтверждение/отказ билетов.
  - Для пользователя: регистрация, авторизация, главная страница пользователя, просмотр своих билетов, покупка билетов, редактирование своего профиля.
- **Контроллеры:** 
  - Обработка главной страницы администратора.
  - Обработка CRUD-операций для сущности User (со стороны администратора).
  - Обработка CRUD-операций для сущности Ticket (со стороны администратора).
  - Обработка CRUD-операций для сущности FilmSession (со стороны администратора).
  - Работа с подтверждением покупки билетов или отказа в покупке билета (для администратора).
  - Логика авторизации/регистрации.
  - Обработка главной страницы пользователя.
  - Работа с покупками билетов (для пользователей).
  - Обработка страницы для просмотра купленных билетов пользователя и возможности вернуть купленный билет.
  - Обработка страницы редактирования профиля пользователя.
- **Фильтры доступа (с помощью Spring Security):** 
  - Разделение прав доступа для администратора и обычного пользователя.
  - Реализация разных языков (англ/рус)

### Примечание:
Это минимальная версия проекта. В процессе разработки возможны дополнения и расширение функционала.
На каждом этапе предполагается активная работа с базой данных, настройка логики на стороне контроллеров/сервисов и обработка взаимодействия через JSP.
